<?xml version="1.0"?>
<ZopeData>
  <record id="1" aka="AAAAAAAAAAE=">
    <pickle>
      <global name="File" module="OFS.Image"/>
    </pickle>
    <pickle>
      <dictionary>
        <item>
            <key> <string>_EtagSupport__etag</string> </key>
            <value> <string>ts21437496.66</string> </value>
        </item>
        <item>
            <key> <string>__name__</string> </key>
            <value> <string>vifib.js</string> </value>
        </item>
        <item>
            <key> <string>content_type</string> </key>
            <value> <string>application/javascript</string> </value>
        </item>
        <item>
            <key> <string>data</string> </key>
            <value> <string encoding="cdata"><![CDATA[

function drawSoftwareProductList(data) {\n
  $(\'#software_product_container\').empty()\n
  var ul = $(\'<ul>\');\n
    $.each(data, function(i,item){\n
      li = $(\'<li>\').appendTo(ul);\n
      var a = $(\'<a>\');\n
      a.attr({\'href\': \'#!software_product/\' + item.uid})\n
      var img = $(\'<img>\');\n
      img.attr({\n
        \'alt\': item.title,\n
        \'src\': item.image,\n
        \'width\': \'100\',\n
        \'height\': \'40\'})\n
      img.appendTo(a);\n
      a.html(a.html() + item.title);\n
      a.appendTo(li);\n
    });\n
  $("#software_product_container").append(ul);\n
}\n
\n
function drawSoftwareReleaseList(data) {\n
  $(\'#software_release_container\').empty()\n
  var ul = $(\'<ul>\');\n
    $.each(data, function(i,item){\n
      li = $(\'<li>\').appendTo(ul);\n
      var a = $(\'<a>\');\n
      a.attr({\n
        \'href\': \'#!software_release/\' + item.uid });\n
      a.html(item.title + \' (\' + item.version + \')\');\n
      a.appendTo(li);\n
    });\n
  $("#software_release_container").append(ul);\n
}\n
\n
function updateSoftwareProductList() {\n
  q = $(\'#software_product_query\')[0][\'value\']\n
  $.getJSON(\n
  vifib[\'site_url\'] + "/ERP5Site_getSoftwareProductListAsJSON",\n
  {"title":q},\n
  drawSoftwareProductList);\n
}\n
\n
function updateSoftwareReleaseList() {\n
  software_product_id = /#!software_product\\/([0-9]+)?/.exec(window.location.hash)[1];\n
  software_product_id = parseInt(software_product_id);\n
  q = $(\'#software_release_query\')[0][\'value\']\n
  $.getJSON(\n
  vifib[\'site_url\'] + "/ERP5Site_getSoftwareReleaseListAsJSON",\n
  {"title":q, "software_product_uid": software_product_id},\n
  drawSoftwareReleaseList);\n
}\n
\n
function softwareReleaseController() {\n
  $.ajaxSetup ({  \n
          cache: false  \n
  });\n
  js_container = $("#js_container");\n
  js_container.empty();\n
  var input = $(\'<input type="text">\');\n
  input.attr(\'id\', "software_release_query");\n
  js_container.append(input);\n
\n
  var refresh = $(\'<input type="button">\');\n
  refresh.attr(\'value\', \'Refresh...\');\n
  refresh.addClass(\'bt-med dialog_submit_button\');\n
  input.after(refresh);\n
  software_release_container = $(\'<div>\');\n
  software_release_container.attr(\'id\', \'software_release_container\');\n
  refresh.after(software_release_container);\n
  refresh.click(updateSoftwareReleaseList);\n
}\n
\n
function softwareProductController () {\n
  js_container = $("#js_container");\n
  js_container.empty();\n
\n
  var input = $(\'<input type="text">\');\n
  input.attr(\'id\', "software_product_query");\n
  js_container.append(input);\n
\n
  var refresh = $(\'<input type="button">\');\n
  refresh.attr(\'value\', \'Refresh...\');\n
  refresh.addClass(\'bt-med dialog_submit_button\');\n
  input.after(refresh);\n
  software_product_container = $(\'<div>\');\n
  software_product_container.attr(\'id\', \'software_product_container\');\n
  refresh.after(software_product_container);\n
  refresh.click(updateSoftwareProductList);\n
\n
}\n
\n
function processRequest() {\n
  computer = $(\'#computer\').val();\n
  url = $(\'#url\').val();\n
  title = $(\'#software_instance_title\').val();\n
  xml = $(\'#software_instance_xml\').val();\n
\n
  $.post(vifib[\'site_url\'] + "/ERP5Site_requestComputerPartitionAsJSON", {\n
    \'software_release_url\': url,\n
    \'title\': title,\n
    \'instance_xml\': xml,\n
    \'computer\': computer\n
    },\n
    function () {\n
      alert(\'Your Software Instance has been requested\');\n
      });\n
}\n
\n
function drawRequest(data) {\n
  js_container = $("#js_container");\n
  js_container.empty();\n
  url_a = $(\'<input type="hidden">\');\n
  url_a.attr({\'value\': data.url, \'name\': \'url\', \'id\': \'url\'});\n
  js_container.append(url_a);\n
  title_q = $(\'<div>\');\n
  title_q.html(\'Software Instance Title:\');\n
  js_container.append(title_q);\n
  title_a = $(\'<input type="text">\');\n
  title_a.attr(\'id\', \'software_instance_title\');\n
  js_container.append(title_a);\n
  js_container.append($(\'<br>\'));\n
\n
  xml_q = $(\'<div>\');\n
  xml_q.html(\'Parameter XML:\');\n
  js_container.append(xml_q);\n
  xml_a = $(\'<textarea>\');\n
  xml_a.attr(\'id\', \'software_instance_xml\');\n
  js_container.append(xml_a)\n
  computer_q = $(\'<div>\');\n
  computer_q.html(\'Computer:\');\n
  js_container.append(computer_q);\n
  computer_a = $(\'<select>\');\n
  computer_a.attr({\'name\': \'computer\', \'id\': \'computer\'});\n
  js_container.append(computer_a)\n
  $.getJSON(vifib[\'site_url\'] + "/ERP5Site_getComputerListAsJSON", function(data) {\n
    option = $(\'<option>\');\n
    option.attr(\'value\', \'\');\n
    option.appendTo(computer_a);\n
    $.each(data, function(i, item){\n
      computer_a = $(\'#computer\');\n
      option = $(\'<option>\');\n
      option.attr(\'value\', item.id);\n
      option.html(item.title + \' (\' + item.id +\')\');\n
      option.appendTo(computer_a);\n
    });\n
  });\n
  summary = $(\'<div>\');\n
  summary.html(\'Software Release: \' + data.title + \' (\' + data.version + \'), url: \' + data.url);\n
  js_container.append(summary);\n
  request = $(\'<input type="button">\');\n
  request.attr(\'value\', \'Request\');\n
  request.click(processRequest);\n
  js_container.append(request);\n
}\n
\n
function requestController() {\n
  $.ajaxSetup ({  \n
          cache: false  \n
  });\n
  software_release_id = /#!software_release\\/([0-9]+)?/.exec(window.location.hash)[1];\n
  software_release_id = parseInt(software_release_id);\n
  $.getJSON(\n
  vifib[\'site_url\'] + "/ERP5Site_getSoftwareReleaseAsJSON",\n
  {"software_release_uid":software_release_id},\n
  drawRequest);\n
}\n
\n
\n
var hash_list = [\n
   {\n
     \'regexp\': /^$/, \n
     \'func\': softwareProductController,\n
   },\n
   {\n
     \'regexp\': /^#!software_product\\/([0-9]+)?$/, \n
     \'func\': softwareReleaseController,\n
   },\n
   {\n
     \'regexp\': /^#!software_release\\/([0-9]+)?$/, \n
     \'func\': requestController,\n
   },\n
 ];\n
\n
function hashController ()\n
{\n
  // If regexp doesn\'t match, keep the page unmodified\n
  var hash = \'\';\n
  if (window.location.hash.length)\n
  {\n
    hash = window.location.hash;\n
  }\n
\n
  var list_len = hash_list.length; \n
  var i = 0;\n
  var found = 0;\n
  for(i; i < list_len; i++) \n
  { \n
    if (hash_list[i].regexp.test(hash)) {\n
      found = 1;\n
      hash_list[i].func();\n
      break;\n
    }\n
  }\n
}

]]></string> </value>
        </item>
        <item>
            <key> <string>precondition</string> </key>
            <value> <string></string> </value>
        </item>
        <item>
            <key> <string>size</string> </key>
            <value> <int>5853</int> </value>
        </item>
        <item>
            <key> <string>title</string> </key>
            <value> <string></string> </value>
        </item>
      </dictionary>
    </pickle>
  </record>
</ZopeData>
